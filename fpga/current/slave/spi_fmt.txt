формат и адреса регистров на spi-шине avr<>fpga.

напоминаю, установка номера - при spics_n=1, далее в 0 и шлём байт (1 или
несколько).


Cтатус: (считывается при spics_n=1 в момент записи номера):
bit.7 - Read-Not-Write (rnw): =1 - спектрум заваитился на чтении, =0 - на записи.
bits.6..0 - какой девайс заваитил, если =1. Пока есть
 bit.0 - если 1, заваитили глюк-часы.


после передерга spics_n 0->1 номер заново надо ставить.


регистр $00 - дефолтный номер, в него можно писать, это пойдёт в
игнор. Устанавливается автоматически в момент spics_n 0->1


регистр $80 - данные для клавиатуры (40 бит сдвиговый рег), запоминаются
              последние 40 вдвинутых битов.
регистр $81 - в момент spics_n 0->1 с этим установленным регистром
уходят данные в рабочий регистр клавиатуры (то, что записано было в $80).

регистр $40 - X coord мыши
        $41 - Y coord мыши
        $42 - кнопки мыши

каждый из регистров уходит в спектрум по факту spics_n 0->1

регистр $20 - регистр сброса - задает сам факт сброса Z80 и страничку пзу, в
которую сброситься. $20[5:4] задают номер страницы, куда сброситься. Факт
сброса - spics_n 0->1


часики:

$11 - регистр чтения адреса, который был установлен спектрумом для глюкочасов.

$10 - регистр чтения-записи данных, которые ожидает спектрум в ваите. То, что
в него пишется - идёт в спектрум, если тот ваитится на чтении, или же из этого
регистра считывается то, что спектрумом записано, если тот ваитится на записи.
После обмена, в момент spics_n 0->1 спектрум разваитивается, прерывание на
аврку снимается, из статуса битик обнуляется.

регистр $10 общий для всех ваит-портов

