>>     »того набор портов должен быть по логике такой:
>>     1F по записи пробрасыветс€ в порт 9F, по чтению проброс из порта 9F
>>     2F переехавший реальный порт вгшки со все его логикой
>>     3F порт дорожки
>>     5F порт сектора
>>     7F порт данных
>>     9F по чтению что записано в 1F, по записи просрос в порт 1F (как вариант зан€ть порт 4F)
>>     AF по чтению проброс записанного в порт FF, по записи проброс дл€ чтени€ из порта FF (как вариант зан€ть порт 6F)
>>     FF пишет напр€мую как и было и проброс дл€ чтени€ в порт 9F
>>      
 
ƒобавочка по порту AF при чтении биты 5-0 читать что проброшено при записи в порт FF, а биты 6-7 подмен€ть статусными битами вгшки.


lvd:
1f<->9f
2f<->VG(1f)
3f<->VG(3f), writes to 4f
5f.. to 6f
7f.. to 8f
ff.wr ->vg(ff)[5..0], af[7..0]
ff.rd -<af[7..6]
af.rd -<vg(ff)[6..7], ff.wr[5..0]


„то сделано (точное описание):
запись:
1f -- пишетс€ в €чейку 1f
2f -- пишетс€ в ¬√93 рег. команд (то, что раньше было записью 1f)
3f -- пишетс€ в ¬√93 как обычно, также сохран€етс€ запись в €чейке 4f
4f -- пишетс€ в €чейку 4f
5f -- пишетс€ в ¬√93 как обычно, также сохран€етс€ запись в €чейке 6f
6f -- пишетс€ в €чейку 6f
7f,8f -- аналогично
9f -- пишетс€ в €чейку 9f
af -- пишетс€ в €чейку af
ff -- пишетс€ в €чейку ff, выводитс€ в контроллер “–ƒќ— как обычно (порт фф)

чтение:
1f -- читаетс€ €чейка 9f
2f -- читаетс€ статус ¬√93 (то, что раньше было чтением 1f)
3f,5f,7f -- читаетс€ ¬√93 как обычно
4f,6f,8f -- читаютс€ €чейки 4f,6f,8f
9f -- читаетс€ €чейка 1f
af -- биты 5..0: €чейка ff, биты 7..6: intrq,drq (то же, что раньше читалось из порта FF “–ƒќ—)
ff -- читаетс€ €чейка af

